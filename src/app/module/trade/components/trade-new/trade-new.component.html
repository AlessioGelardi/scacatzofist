<player-status [player]="player"></player-status>

<trade-buttons [buttons]="buttons" (buttonOperation)="buttonOperationHandler($event)"></trade-buttons>

<div class="row mt-3 d-flex justify-content-center text-center" *ngIf="showPlayers">
    <div class="col-5">
        <label>Decidi con chi fare trade</label>
        <input [(ngModel)]="filterName" type="text" class="mt-3 form-control sfondino" placeholder="Cerca user" autofocus>
    </div>
    
    <div class="mt-3">
        <div *ngFor="let player of players | filterPlayer: filterName!">
            <button class="col-7 m-2 btn btn-lg rounded grigino" (click)="selectPlayer(player._id!,player.name)">{{player.name}}</button>
        </div>
    </div>
</div>

<div class="mt-3" *ngIf="!showPlayers">
    <div class="row d-flex justify-content-center">
        <button class="col-6 m-2 btn btn-bg rounded grigino" style="margin-right: 5px" (click)="create()">CREA TRADE</button>
    </div>
    <div class="row mt-3">
        <div class="col-6" style="border-right: solid #8a8989 1px">
            <div class="text-center">
                <h5>OFFERTA </h5>
            </div>
            <form [formGroup]="createMyTrade">
                <div class="row mt-4">
                    <div class="col-3">
                        <input type="range" class="form-control" id="coins" formControlName="coins" max="{{player!.coin}}">
                    </div>
                    <div class="col">
                        <strong><label>{{this.createMyTrade.value.coins}}</label></strong>&nbsp;<i class="fa fa fa-database"></i>
                    </div>
                    <div class="col-3">
                        <input type="range" class="form-control" id="credits" formControlName="credits" max="{{player!.credits}}">
                    </div>
                    <div class="col">
                        <strong><label>{{this.createMyTrade.value.credits}}</label></strong>&nbsp;<i class="fa fa fa-diamond"></i>
                    </div>
                </div>
            </form>
        </div>

        <div class="col-6" style="border-left: solid #8a8989 1px">
            <div class="text-center">
                <h5>RICHIESTA </h5>
            </div>
            <form [formGroup]="createYourTrade">
                <div class="row mt-4">
                    <div class="col-3">
                        <input type="range" class="form-control" id="coins" formControlName="coins" max="99999">
                    </div>
                    <div class="col">
                        <strong><label>{{this.createYourTrade.value.coins}}</label></strong>&nbsp;<i class="fa fa fa-database"></i>
                    </div>
                    <div class="col-3">
                        <input type="range" class="form-control" id="credits" formControlName="credits" max="999">
                    </div>
                    <div class="col">
                        <strong><label>{{this.createYourTrade.value.credits}}</label></strong>&nbsp;<i class="fa fa fa-diamond"></i>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<div class="row mt-5" *ngIf="!showPlayers">
    <div class="col-3" style="padding-right:80px">
        <label>LE MIE CARTE</label>
        <div *ngIf="myZaino.length>0" class="row mt-2" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="myZaino" id="myZaino" [cdkDropListConnectedTo]="['myPlate']">
            <div *ngFor="let card of myZaino" class="col-3" cdkDrag (click)="showCard(card)" (cdkDragStarted)="onDragStart()" (cdkDragEnded)="onDragEnd()">
                <img class="tradecard" src="{{'https://images.ygoprodeck.com/images/cards/'+card?.id+'.jpg'}}"  />
            </div>
        </div>
    </div>
    <div class="col-3" style="padding-right:80px; border-right: solid #8a8989 1px">
        <label>CARTE OFFERTE</label>
        <div *ngIf="myPlate.length>0" class="row mt-2" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="myPlate" id="myPlate" [cdkDropListConnectedTo]="['myZaino']">
            <div *ngFor="let card of myPlate" class="col-3" cdkDrag (click)="showCard(card)" (cdkDragStarted)="onDragStart()" (cdkDragEnded)="onDragEnd()">
                <img class="tradecard" src="{{'https://images.ygoprodeck.com/images/cards/'+card?.id+'.jpg'}}"  />
            </div>
        </div>
        <div *ngIf="myPlate.length<=0" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="myPlate" id="myPlate" [cdkDropListConnectedTo]="['myZaino']" >
            <div class="area-drop mt-2"></div>
        </div>
    </div>
    <div class="col-3" style="padding-right:80px; border-left: solid #8a8989 1px">
        <label>CARTE RICHIESTE</label>
        <div *ngIf="oppoPlate.length>0" class="row mt-2" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="oppoPlate" id="oppoPlate" [cdkDropListConnectedTo]="['oppoZaino']">
            <div *ngFor="let card of oppoPlate" class="col-3" cdkDrag (click)="showCard(card)" (cdkDragStarted)="onDragStart()" (cdkDragEnded)="onDragEnd()">
                <img class="tradecard" src="{{'https://images.ygoprodeck.com/images/cards/'+card?.id+'.jpg'}}"  />
            </div>
        </div>
        <div *ngIf="oppoPlate.length<=0" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="oppoPlate" id="oppoPlate" [cdkDropListConnectedTo]="['oppoZaino']" >
            <div class="area-drop mt-2"></div>
        </div>
    </div>
    <div class="col-3" style="padding-right:80px">
        <label>CARTE DI <strong>{{selectPlayerName}}</strong></label>
        <div *ngIf="oppoZaino.length>0" class="row mt-2" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="oppoZaino" id="oppoZaino" [cdkDropListConnectedTo]="['oppoPlate']">
            <div *ngFor="let card of oppoZaino" class="col-3" cdkDrag (click)="showCard(card)" (cdkDragStarted)="onDragStart()" (cdkDragEnded)="onDragEnd()"> 
                <img class="tradecard" src="{{'https://images.ygoprodeck.com/images/cards/'+card?.id+'.jpg'}}"  />
            </div>
        </div>
    </div>

</div>

